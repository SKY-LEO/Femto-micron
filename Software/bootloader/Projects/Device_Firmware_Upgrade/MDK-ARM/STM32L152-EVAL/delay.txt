; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\stm32l152-eval\delay.o --asm_dir=.\STM32L152-EVAL\ --list_dir=.\STM32L152-EVAL\ --depend=.\stm32l152-eval\delay.d --cpu=Cortex-M3 --apcs=interwork -O3 --diag_suppress=9931 -I..\inc -I..\..\..\Libraries\CMSIS\Device\ST\STM32L1xx\Include -I..\..\..\Libraries\STM32_USB-FS-Device_Driver\inc -I..\..\..\Libraries\STM32L1xx_StdPeriph_Driver\inc -I..\..\..\Utilities\STM32_EVAL -I..\..\..\Utilities\STM32_EVAL\Common -I..\..\..\Utilities\STM32_EVAL\STM32L152_EVAL -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_v5\ARM\Inc\ST\STM32L1xx -D__MICROLIB -D__UVISION_VERSION=522 -DUSE_STDPERIPH_DRIVER -DSTM32L1XX_MD -DUSE_STM32L152_EVAL --omf_browse=.\stm32l152-eval\delay.crf ..\src\delay.c]
                          THUMB

                          AREA ||i.delay_ms||, CODE, READONLY, ALIGN=2

                  delay_ms PROC
;;;5      
;;;6      void delay_ms(volatile uint32_t ms)
000000  b511              PUSH     {r0,r4,lr}
;;;7      {
;;;8        //SysTick_Config(7200);  // настройка таймера на период 1мс и запуск
;;;9        //SysTick_Config(1000);  // настройка таймера на период 1мс и запуск
;;;10     	SysTick_Config(SystemCoreClock / 1000);  // настройка таймера на период 1мс и запуск
000002  480e              LDR      r0,|L1.60|
000004  f44f717a          MOV      r1,#0x3e8
000008  f04f22e0          MOV      r2,#0xe000e000
00000c  6800              LDR      r0,[r0,#0]  ; SystemCoreClock
00000e  fbb0f0f1          UDIV     r0,r0,r1
000012  2100              MOVS     r1,#0
000014  1e40              SUBS     r0,r0,#1
000016  f1b07f80          CMP      r0,#0x1000000
00001a  d207              BCS      |L1.44|
00001c  6150              STR      r0,[r2,#0x14]         ;7
00001e  4b08              LDR      r3,|L1.64|
000020  20f0              MOVS     r0,#0xf0              ;7
000022  f8830d14          STRB     r0,[r3,#0xd14]        ;7
000026  6191              STR      r1,[r2,#0x18]         ;7
000028  2007              MOVS     r0,#7                 ;7
00002a  6110              STR      r0,[r2,#0x10]         ;7
                  |L1.44|
;;;11       msTicks=0;
00002c  4805              LDR      r0,|L1.68|
00002e  6001              STR      r1,[r0,#0]  ; msTicks
                  |L1.48|
;;;12       while(msTicks < ms);	  // Ждем пока таймер досчитает до нужного значения
000030  6803              LDR      r3,[r0,#0]  ; msTicks
000032  9c00              LDR      r4,[sp,#0]
000034  42a3              CMP      r3,r4
000036  d3fb              BCC      |L1.48|
;;;13       SysTick->CTRL = 0;     // Отключаем таймер
000038  6111              STR      r1,[r2,#0x10]
;;;14     }
00003a  bd18              POP      {r3,r4,pc}
                          ENDP

                  |L1.60|
                          DCD      SystemCoreClock
                  |L1.64|
                          DCD      0xe000e00f
                  |L1.68|
                          DCD      ||.data||

                          AREA ||.data||, DATA, ALIGN=2

                  msTicks
                          DCD      0x00000000

;*** Start embedded assembler ***

#line 1 "..\\src\\delay.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___7_delay_c_msTicks____REV16|
#line 129 "C:\\Keil_v5\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___7_delay_c_msTicks____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___7_delay_c_msTicks____REVSH|
#line 144
|__asm___7_delay_c_msTicks____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
